define ("block_h_infra_rsc/table_manager",["jquery"],function(a){var d={Keywords:[],applicationthemes:[],homepartnerinstitution:[]},e;function b(b){a.ajax({method:"POST",url:"ajax_call.php",data:{mode:"select",datas:b}}).done(function(b){a("#table_data").empty();var d=JSON.parse(b);for(var f in d){var g=a("#table_data").html()+"<tr><td><a href='"+d[f].researchinfrastructure+"'.>"+d[f].researchinfrastructure.substr(d[f].researchinfrastructure.lastIndexOf("/")+1,d[f].researchinfrastructure.lastIndexOf(".jpg")-d[f].researchinfrastructure.lastIndexOf("/")-1)+"</td><td>"+d[f].applicationthemes+"</td><td>"+d[f].keywords+"</td><td>"+d[f].homepartnerinstitution+"</td>";if(e){g=g+"<td><span class=\"remove_rec\" rec_id=\""+d[f].id+"\"><i class=\"icon fa fa-trash fa-fw \" title=\"Supprimer\" aria-label=\"Supprimer\"></i></span></td>"}a("#table_data").html(g)}c()})}function c(){a(".remove_rec").click(function(){if(confirm("Are you sure?")){var c=a(this).attr("rec_id");a.ajax({method:"POST",url:"ajax_call.php",data:{mode:"remove",rec_id:c}}).done(function(){b(d)})}})}return{init:function init(f){e=f;a(".cellule_research").click(function(c){if(!c){c=window.event}if(c.ctrlKey){if("Keywords"==a(this).attr("box")){if(d.Keywords.includes(a(this).html())){var f=d.Keywords.indexOf(a(this).html());if(-1!==f){d.Keywords.splice(f,1)}}else{d.Keywords.push(a(this).html())}}if("applicationthemes"==a(this).attr("box")){if(d.applicationthemes.includes(a(this).html())){var f=d.applicationthemes.indexOf(a(this).html());if(-1!==f){d.applicationthemes.splice(f,1)}}else{d.applicationthemes.push(a(this).html())}}if("institution"==a(this).attr("box")){if(d.homepartnerinstitution.includes(a(this).html())){var f=d.homepartnerinstitution.indexOf(a(this).html());if(-1!==f){d.homepartnerinstitution.splice(f,1)}}else{d.homepartnerinstitution.push(a(this).html())}}}else{if("Keywords"==a(this).attr("box")){d.homepartnerinstitution=[];d.homepartnerinstitution.length=0;d.applicationthemes=[];d.applicationthemes.length=0;if(d.Keywords.includes(a(this).html())&&1==d.Keywords.length){d.Keywords=[];d.Keywords.length=0}else{d.Keywords=[a(this).html()]}}if("institution"==a(this).attr("box")){d.applicationthemes=[];d.applicationthemes.length=0;d.Keywords=[];d.Keywords.length=0;if(d.homepartnerinstitution.includes(a(this).html())&&1==d.homepartnerinstitution.length){d.homepartnerinstitution=[];d.homepartnerinstitution.length=0}else{d.homepartnerinstitution=[a(this).html()]}}if("applicationthemes"==a(this).attr("box")){d.Keywords=[];d.Keywords.length=0;d.homepartnerinstitution=[];d.homepartnerinstitution.length=0;if(d.applicationthemes.includes(a(this).html())&&1==d.applicationthemes.length){d.applicationthemes=[];d.applicationthemes.length=0}else{d.applicationthemes=[a(this).html()]}}}if(!c.ctrlKey){a(".cellule_research").css("background-color","rgb(68, 162, 272)");if("applicationthemes"==a(this).attr("box")){a(".cellule_homepartnerinstitution").css("background-color","rgb(68, 114, 196)");a(".cellule_keyword").css("background-color","rgb(68, 114, 196)")}if("institution"==a(this).attr("box")){a(".cellule_keyword").css("background-color","rgb(68, 114, 196)");a(".cellule_applicationthemes").css("background-color","rgb(68, 114, 196)")}if("Keywords"==a(this).attr("box")){a(".cellule_homepartnerinstitution").css("background-color","rgb(68, 114, 196)");a(".cellule_applicationthemes").css("background-color","rgb(68, 114, 196)")}if(0==d.applicationthemes.length){a(".cellule_applicationthemes").css("background-color","#4472c4")}else{if("rgb(68, 114, 196)"==a(this).css("background-color")){a(this).css("background-color","rgb(68, 162, 272)")}else{a(this).css("background-color","#4472c4")}}if(0==d.Keywords.length){a(".cellule_keyword").css("background-color","#4472c4")}else{if("rgb(68, 114, 196)"==a(this).css("background-color")){a(this).css("background-color","rgb(68, 162, 272)")}else{a(this).css("background-color","#4472c4")}}if(0==d.homepartnerinstitution.length){a(".cellule_homepartnerinstitution").css("background-color","#4472c4")}else{if("rgb(68, 114, 196)"==a(this).css("background-color")){a(this).css("background-color","rgb(68, 162, 272)")}else{a(this).css("background-color","#4472c4")}}}else{var g="";if("Keywords"==a(this).attr("box")){g="keyword"}if("applicationthemes"==a(this).attr("box")){g="applicationthemes"}if("institution"==a(this).attr("box")){g="homepartnerinstitution"}if("keyword"==g){var h="Keywords"}else{var h=g}if(0==d[h].length){a(".cellule_"+g).css("background-color","rgb(68, 114, 196)")}else{a(".cellule_"+g).css("background-color","rgb(68, 162, 272)");a(".cellule_"+g).each(function(){var b=a(this).html(),c=a(this);if("keyword"==g){g="Keywords"}if("institution"==g){g="homepartnerinstitution"}d[g].forEach(function(a){if(a==b){c.css("background-color","rgb(68, 114, 196)")}console.log(a+" "+b)})})}}console.log(d);b(d)});c()},progressive_disappear:function progressive_disappear(){a("#message_confirmation").fadeOut(1500,function(){a("#message_confirmation").remove()})}}});
//# sourceMappingURL=table_manager.min.js.map
